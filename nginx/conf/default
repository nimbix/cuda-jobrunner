server {
        listen 443 ssl;

        root /code/web/doc;
        index index.html index.htm;

        # Make site accessible from http://localhost/
        #server_name localhost;

        auth_basic "Please Log In";
        auth_basic_user_file /etc/JARVICE/htpasswd;

        ssl_certificate /etc/JARVICE/cert.pem;
        ssl_certificate_key /etc/JARVICE/cert.pem;
        ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers         HIGH:!aNULL:!MD5;


        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ @rmqfiles;
                # Uncomment to enable naxsi on this location
                # include /etc/nginx/naxsi.rules
        }

        location @rmqfiles {
                 root /var/lib/rabbitmq/mnesia/rabbit@JARVICENAE-0A0A1839-plugins-expand/rabbitmq_management-3.6.6/priv/www;
                 try_files $uri $uri/ =404;
        }

        location /v1 {
                proxy_pass http://localhost:5000/;
        }

        location /api/ {
                 proxy_pass http://127.0.0.1:15672;
        }

        location /rmq {
                 proxy_pass http://127.0.0.1:15672/;
                 proxy_set_header   Host   $host;
                 proxy_set_header   X-Real-IP  $remote_addr;
                 proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
        }
}
